# 10 Bar Truss Optimization Develop Record

[![hackmd-github-sync-badge](https://hackmd.io/bmix-_hfTZe0s2yxhxKl_A/badge)](https://hackmd.io/bmix-_hfTZe0s2yxhxKl_A)


本次作業使用 python 進行 10-Bar Truss Optimization 的程式實作，其中使用 python 的套件 scipy.optimize 進行最佳化，故並無進行最佳化演算法的實作。

## 目標

實作有限元素法 (Finite Element Method, FEM) 並應用於十桿桁架的最佳化。其中，由於作業提示當中已針對有限元素法的實作方式以及實際最佳化結果結果進行詳盡描述，故嘗試將程式中使用到的元素進行物件導向程式設計，以可重用為另一目標進行實作。

## FEM 實作

由於有限元素法主要是將各個桿件是為不同元素，並以各桿件端點最為位移基本。因此將有限元素法分為端點、桿件、系統三個物件進行實作。

### 端點

端點基本上僅是一個座標點，因此以一個複數作為實作基礎，加上相對應的運算方式便達成端點的實作。
其中除了複數的基本運算，另外加入了 cos, sin 等常用三角函數作為物件的屬性 (Attribute) 以便計算。

### 桿件

由於桿件本身可視為一個包含楊氏係數、密度、直徑等物理性質的向量，故亦可由其兩端端點以及其物理性質作為基本元素進行初始化後，\
將常用性質例如座標系轉換矩、剛性矩陣設定為屬性以便計算。

### 系統

有限元素法系統為物件導向設計最困難的部分，嘗試將加入端點、固定端點、加入桿件等各種應該可以自由調整的部分設定為物件的方法 (Method)。\
並且在計算整體系統的剛性矩陣、位移計算、應力計算的部分一般化為可以根據端點數量以及桿件數量進行維度調整的物件。

## 系統最佳化

由於最佳化需要針對特定系統進行目標方程式以及相應限制的程式設計，在實作部分與有限元素法部分獨立出來為一腳本程式進行。\
而腳本程式的實作部分並無我認為較特別的設計，僅為最佳化目標以及限制進行基本的函數設計。

最佳化方法部分，由於對於 scipy.optimize 提供的各種最佳化方法間差異還不甚熟悉，\
最後選擇與 Matlab 的 fmincon 的 SQP 類似的 SLSQP 演算法進行最佳化。

### 最佳化結果

最佳化執行結果如下，在 (r1,r2) = (0.3,0.2663) 時 f = 212406 。

```
fun:212406.0335317809
jac: array([812557.97265625, 679880.058593757)
message: 'Optimization terminated successfully'
nfev: 84
nit: 25
njev: 25
status: 0
success: True
X : array([0.30002294, 0.26626172])
```

## 未來發展

目前實作達到的最佳化結果與問題描述中的最佳化結果相同，然而程式執行時間於本機測試需要約 5 分鐘，估計是在有限元素法的物件實作當中加入太多動態運算，導致每次迭代皆需要大量重複計算使得時間消費過大，可以針對此一部分進行實驗與改進。
